<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chess Tournament Standings</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">

<div class="max-w-6xl mx-auto py-10 px-4">
  <h1 class="text-3xl font-bold text-center mb-6">Chess Tournament Standings</h1>
  <div class="overflow-x-auto rounded-2xl shadow-lg">
    <table id="standingsTable" class="min-w-full bg-white rounded-2xl">
      <thead class="bg-gray-200 text-gray-700">
        <tr>
          <th class="py-3 px-4 text-left">#</th>
          <th class="py-3 px-4">Avatar</th>
          <th class="py-3 px-4 text-left">Player</th>
          <th class="py-3 px-4">Rating</th>
          <th class="py-3 px-4">Pts.</th>
          <th class="py-3 px-4">Result</th>
        </tr>
      </thead>
      <tbody id="standingsBody" class="divide-y divide-gray-200"></tbody>
    </table>
  </div>
</div>

<!-- Modal -->
<div id="gameModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
  <div class="bg-white rounded-2xl p-6 max-w-md w-full shadow-lg">
    <h2 id="modalTitle" class="text-xl font-bold mb-4">Last Game</h2>
    <p id="modalContent" class="mb-4"></p>
    <button onclick="closeModal()" 
            class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">Close</button>
  </div>
</div>

<script>
const players = [
  {name:"Kayal Vijay", rating:1570, pts:1, result:"1b", lastGame:"Beat Carolus Tang as Black"},
  {name:"Carolus Tang", rating:1567, pts:1, result:"1w", lastGame:"Lost to Kayal Vijay as White"},
  {name:"Tamal Matilal", rating:1541, pts:1, result:"1b", lastGame:"Beat Chandra Prakash as Black"},
  {name:"Chandra Prakash", rating:1583, pts:0.5, result:"½w", lastGame:"Drew with Dexter Wildsmith as White"},
  {name:"Dexter Wildsmith", rating:0, pts:0.5, result:"½b", lastGame:"Drew with Chandra Prakash as Black"},
  {name:"David Dowson", rating:1520, pts:0.5, result:"½w", lastGame:"Drew with Ayush Pradeep Menon as White"},
  {name:"Ayush Pradeep Menon", rating:1237, pts:0.5, result:"½b", lastGame:"Drew with David Dowson as Black"},
  {name:"Cecil Sloan", rating:1596, pts:0.5, result:"½w", lastGame:"Drew with opponent not recorded"},
  {name:"Matthew Pickering", rating:1464, pts:0.5, result:"½w", lastGame:"Drew with opponent not recorded"},
  {name:"Kevin Markey", rating:1504, pts:0.5, result:"½w", lastGame:"Drew with opponent not recorded"},
  {name:"Dev Mistry", rating:1192, pts:0.5, result:"½w", lastGame:"Drew with opponent not recorded"},
  {name:"Gareth Holyfield", rating:1470, pts:0.5, result:"½w", lastGame:"Drew with opponent not recorded"},
  {name:"Rob Sweeney", rating:1448, pts:0.5, result:"½w", lastGame:"Drew with opponent not recorded"},
  {name:"Arnav Jain", rating:0, pts:0.5, result:"½w", lastGame:"Drew with opponent not recorded"},
  {name:"Andrei Zhuravlev", rating:1455, pts:0, result:"0w", lastGame:"Lost (opponent not recorded)"},
  {name:"Edward Farms", rating:1519, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Ken Ronald", rating:1552, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Glyn Hill", rating:1425, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"James Peel", rating:1543, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Shrisha Tarihalkar", rating:1526, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Jai Are", rating:987, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Aarav Ghanshala", rating:0, pts:0, result:"0w", lastGame:"Lost (opponent not recorded)"},
  {name:"Xander Scott", rating:713, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Harshavardhan Engam", rating:1532, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Lirush Chandrakumar", rating:0, pts:0, result:"0b", lastGame:"Lost (opponent not recorded)"},
  {name:"Artem Miller", rating:1413, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Paul Gardiner", rating:1553, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Yile Wang", rating:1421, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Nette Robinson", rating:1542, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Peter Hughes", rating:1324, pts:0, result:"0w", lastGame:"Lost (opponent not recorded)"},
  {name:"Aaron Bell", rating:1408, pts:0, result:"0b", lastGame:"Lost (opponent not recorded)"},
  {name:"Alan Richardson", rating:1514, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"David Scott", rating:1212, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Max Gregory", rating:1090, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Michael Lay", rating:1504, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Richard Keightley", rating:1458, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Hayden Crisp", rating:1493, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Otto Bryant", rating:1491, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Bernadette Marie", rating:1236, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Bart Gee", rating:0, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"},
  {name:"Nicholas Cartwright", rating:1278, pts:0, result:"0", lastGame:"Lost (opponent not recorded)"}
];

function renderTable() {
  players.sort((a,b) => b.pts - a.pts || b.rating - a.rating);
  const tbody = document.getElementById("standingsBody");
  tbody.innerHTML = "";
  players.forEach((p,i) => {
    tbody.innerHTML += `
      <tr>
        <td class="py-3 px-4">${i+1}</td>
        <td class="py-3 px-4 text-center">
          <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(p.name)}" class="w-10 h-10 rounded-full mx-auto" alt="Avatar">
        </td>
        <td class="py-3 px-4 font-semibold text-blue-600 cursor-pointer" onclick="showGame('${p.name}')">${p.name}</td>
        <td class="py-3 px-4 text-center">${p.rating}</td>
        <td class="py-3 px-4 text-center">${p.pts}</td>
        <td class="py-3 px-4 text-center">${p.result}</td>
      </tr>`;
  });
}

function showGame(name) {
  const player = players.find(p => p.name === name);
  document.getElementById("modalTitle").innerText = `${player.name} - Last Game`;
  document.getElementById("modalContent").innerText = player.lastGame;
  document.getElementById("gameModal").classList.remove("hidden");
}

function closeModal() {
  document.getElementById("gameModal").classList.add("hidden");
}

// Example live update: updateScore("Player Name", newPts, "result", "last game text")
function updateScore(name, newPts, newResult, newGame) {
  let p = players.find(p => p.name === name);
  if(p) {
    p.pts = newPts;
    p.result = newResult;
    p.lastGame = newGame;
    renderTable();
  }
}

renderTable();
</script>
</body>
</html>
